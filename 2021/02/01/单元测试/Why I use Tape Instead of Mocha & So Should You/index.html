<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Why I use Tape Instead of Mocha &amp; So Should You"><meta name="keywords" content="单元测试,翻译"><meta name="author" content="liuarui"><meta name="copyright" content="liuarui"><title>Why I use Tape Instead of Mocha &amp; So Should You | liuarui的博客</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '5.4.0'
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Why-I-use-Tape-Instead-of-Mocha-amp-So-Should-You"><span class="toc-number">1.</span> <span class="toc-text">Why I use Tape Instead of Mocha &amp; So Should You</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E6%88%91%E8%A6%81%E4%BD%BF%E7%94%A8-Tape-%E6%9D%A5%E6%9B%BF%E4%BB%A3-Mocha-amp-%E4%BD%A0%E4%B9%9F%E5%BA%94%E8%AF%A5%E8%BF%99%E4%B9%88%E8%AF%84%E4%BC%B0%E8%BD%AF%E4%BB%B6%E8%B4%A8%E9%87%8F"><span class="toc-number">2.</span> <span class="toc-text">为什么我要使用 Tape 来替代 Mocha &amp; 你也应该这么评估软件质量</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#What-are-Unit-tests"><span class="toc-number">2.1.</span> <span class="toc-text">What are Unit tests?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95%EF%BC%9F"><span class="toc-number">2.2.</span> <span class="toc-text">什么是单元测试？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#What%E2%80%99s-Wrong-with-Mocha-Jasmine-etc%E2%80%A6"><span class="toc-number">2.3.</span> <span class="toc-text">What’s Wrong with Mocha, Jasmine, etc…?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mocha%EF%BC%8CJasmine-%E7%AD%89%E6%A1%86%E6%9E%B6%E9%83%BD%E5%AD%98%E5%9C%A8%E4%BB%80%E4%B9%88%E9%97%AE%E9%A2%98%EF%BC%9F"><span class="toc-number">2.4.</span> <span class="toc-text">Mocha，Jasmine 等框架都存在什么问题？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Why-Tape"><span class="toc-number">2.5.</span> <span class="toc-text">Why Tape?</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E9%80%89%E6%8B%A9-Tape%EF%BC%9F"><span class="toc-number">2.6.</span> <span class="toc-text">为什么选择 Tape？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mocking-is-a-code-smell"><span class="toc-number">2.7.</span> <span class="toc-text">Mocking is a code smell.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%87%E9%87%8D%E7%9A%84-Mock-%E6%98%AF%E4%B8%80%E4%B8%AD%E7%B3%9F%E7%B3%95%E7%9A%84%E7%BC%96%E7%A0%81%E4%B9%A0%E6%83%AF"><span class="toc-number">2.8.</span> <span class="toc-text">过重的 Mock 是一中糟糕的编码习惯</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Testing-is-not-what-you-should-spend-most-of-your-time-doing"><span class="toc-number">2.9.</span> <span class="toc-text">Testing is not what you should spend most of your time doing.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%A0%E4%B8%8D%E5%BA%94%E8%AF%A5%E6%8A%95%E5%85%A5%E5%A4%A7%E9%87%8F%E6%97%B6%E9%97%B4%E5%8E%BB%E7%BC%96%E5%86%99%E6%B5%8B%E8%AF%95%E7%94%A8%E4%BE%8B"><span class="toc-number">2.10.</span> <span class="toc-text">你不应该投入大量时间去编写测试用例</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Test-assertions-should-be-dead-simple-amp-completely-free-of-magic"><span class="toc-number">2.11.</span> <span class="toc-text">Test assertions should be dead simple,&amp; completely free of magic.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8B%E8%AF%95%E6%96%AD%E8%A8%80%E5%BA%94%E8%AF%A5%E5%B0%BD%E5%8F%AF%E8%83%BD%E7%9A%84%E7%AE%80%E5%8D%95%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%AE%8C%E5%85%A8%E6%B2%A1%E6%9C%89%E9%BB%91%E9%AD%94%E6%B3%95%EF%BC%88%E4%B8%8D%E5%B8%A6%E5%85%A5%E9%99%A4%E5%BA%94%E6%9C%89%E5%AE%9E%E7%8E%B0%E7%9A%84%E5%AE%9E%E7%8E%B0%EF%BC%89"><span class="toc-number">2.12.</span> <span class="toc-text">测试断言应该尽可能的简单，并且完全没有黑魔法（不带入除应有实现的实现）</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Your-test-descriptions-should-be-clear-enough-to-use-as-documentation"><span class="toc-number">2.13.</span> <span class="toc-text">Your test descriptions should be clear enough to use as documentation.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%82%A8%E7%9A%84%E6%B5%8B%E8%AF%95%E6%8F%8F%E8%BF%B0%E5%BA%94%E8%B6%B3%E5%A4%9F%E6%B8%85%E6%99%B0%EF%BC%8C%E4%BB%A5%E8%87%B3%E5%8F%AF%E4%BB%A5%E5%BD%93%E4%BD%9C%E6%96%87%E6%A1%A3%E9%98%85%E8%AF%BB%E3%80%82"><span class="toc-number">2.14.</span> <span class="toc-text">您的测试描述应足够清晰，以至可以当作文档阅读。</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Your-automated-test-error-messages-are-your-bug-reports"><span class="toc-number">2.15.</span> <span class="toc-text">Your automated test error messages are your bug reports.</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%82%A8%E7%9A%84%E8%87%AA%E5%8A%A8%E6%B5%8B%E8%AF%95%E9%94%99%E8%AF%AF%E6%B6%88%E6%81%AF%E5%B0%B1%E6%98%AF%E6%82%A8%E7%9A%84%E9%94%99%E8%AF%AF%E6%8A%A5%E5%91%8A%E3%80%82"><span class="toc-number">2.16.</span> <span class="toc-text">您的自动测试错误消息就是您的错误报告。</span></a></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">liuarui</div><div class="author-info__description text-center">基于hexo搭建的个人博客</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/liuarui">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">41</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">38</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">liuarui的博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a></span><span class="pull-right"></span></div><div id="post-info"><div id="post-title">Why I use Tape Instead of Mocha &amp; So Should You</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-02-01</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="Why-I-use-Tape-Instead-of-Mocha-amp-So-Should-You"><a href="#Why-I-use-Tape-Instead-of-Mocha-amp-So-Should-You" class="headerlink" title="Why I use Tape Instead of Mocha &amp; So Should You"></a>Why I use Tape Instead of Mocha &amp; So Should You</h1><h1 id="为什么我要使用-Tape-来替代-Mocha-amp-你也应该这么评估软件质量"><a href="#为什么我要使用-Tape-来替代-Mocha-amp-你也应该这么评估软件质量" class="headerlink" title="为什么我要使用 Tape 来替代 Mocha &amp; 你也应该这么评估软件质量"></a>为什么我要使用 Tape 来替代 Mocha &amp; 你也应该这么评估软件质量</h1><p>作者<a target="_blank" rel="noopener" href="https://medium.com/@_ericelliott?source=post_page-----6aa105d8eaf4--------------------------------">Eric Elliott</a></p>
<p>写作时间：Jul 13, 2015</p>
<blockquote>
<p><em>TL;DR: Mocha is a $150k Porsche Panamera when the best tool for the job is a $30k Tesla Model 3. Don’t waste your resources on testing bells and whistles. Invest them in creating your app, instead.</em> &gt;<em>总结: Mocha 是一个价值 150 刀的保时捷，但是往往我们工作中只需要 30 刀的特斯拉就能带来最好的效益。不要为了使用一个测试软件而去使用测试软件，而是使用他们来驱动你的程序开发。</em><br>UPDATE: I have written a simplified wrapper around Tape to make it even simpler to write great unit tests which provide clear bug reports when they fail. See <a target="_blank" rel="noopener" href="https://medium.com/javascript-scene/rethinking-unit-test-assertions-55f59358253f">“Rethinking Unit Test Assertions”</a> for more details.<br>UPDATE：我对 Tape 进行了简易封装，使它能够更容易的编写出优秀的单元测试，且能够在测试用例未通过时提供清晰的错误报告，有关其更多信息请参考 <a target="_blank" rel="noopener" href="https://medium.com/javascript-scene/rethinking-unit-test-assertions-55f59358253f">“Rethinking Unit Test Assertions”</a></p>
</blockquote>
<p>Sometimes popularity is an indication of quality. Other times, popular things are popular for popularity’s sake, and not because they’re better than alternatives.</p>
<p>一般而言，受欢迎程度反映了事物的质量。但有时，受欢迎的事物只是因为受欢迎而受欢迎，而不是因为它们比非主流的更好。</p>
<p>On real production projects, I have used Jasmine, Mocha, NodeUnit, Tape, and a bunch of other solutions. I have investigated <em>many other options.</em> For the last few years, I have used and continue to use <a target="_blank" rel="noopener" href="https://github.com/substack/tape">Tape</a> along with Supertest (for API testing) on all of my personal projects and projects that I lead.</p>
<p>在实际的生产项目中，我曾使用过 Jasmine，Mocha，NodeUnit，Tape 和许多其他解决方案。我研究过各种框架。但是在过去的几年中，我在我所有的个人项目和我主导的项目中都使用并继续使用<a target="_blank" rel="noopener" href="https://github.com/substack/tape">Tape</a>和 Supertest（用于 API 测试）。</p>
<h2 id="What-are-Unit-tests"><a href="#What-are-Unit-tests" class="headerlink" title="What are Unit tests?"></a>What are Unit tests?</h2><h2 id="什么是单元测试？"><a href="#什么是单元测试？" class="headerlink" title="什么是单元测试？"></a>什么是单元测试？</h2><p>Unit tests exist to test individual units of software functionality. A unit is a module, component, or function. They’re bits of the program that can work independently of the rest of the program. The presence of unit testing implies that the software is designed in a modular fashion. You may hear once in a while that there are ways to make software “more testable.”</p>
<p>单元测试常见于测试软件功能的各个单元。单元是可以是一个模块，组件或函数。它们是程序的一部分，可以独立于程序的其余部分工作。单元测试的存在意味着该软件是以模块化方式设计的。您可能偶尔会听到有一些使软件“更具可测试性”的方法。</p>
<p>If you find that it’s hard to write unit tests for your program without mocking lots of other things, that’s a sign that your program is not modular enough. Revealing tight coupling (the opposite of modularity) is one of the many important roles that unit tests play in software creation.</p>
<p>如果您发现很难在不模拟许多其他事情的情况下为程序编写单元测试，则表明您的程序不够模块化。发现耦合（与模块化相反）是单元测试在软件开发中扮演的许多重要功能之一。</p>
<p>Every module should have unit tests, and every application should be made up of modules. In other words, if you’re not writing unit tests, you should be.</p>
<p>每个模块都应该有单元测试，每个应用程序都应该由模块组成。换句话说，如果您不编写单元测试，则更应该这么做。</p>
<h2 id="What’s-Wrong-with-Mocha-Jasmine-etc…"><a href="#What’s-Wrong-with-Mocha-Jasmine-etc…" class="headerlink" title="What’s Wrong with Mocha, Jasmine, etc…?"></a>What’s Wrong with Mocha, Jasmine, etc…?</h2><h2 id="Mocha，Jasmine-等框架都存在什么问题？"><a href="#Mocha，Jasmine-等框架都存在什么问题？" class="headerlink" title="Mocha，Jasmine 等框架都存在什么问题？"></a>Mocha，Jasmine 等框架都存在什么问题？</h2><ol>
<li><p><strong>Too much configuration :</strong> Choose an assertion library, chose a reporting library, chose a task runner (Grunt, Gulp, etc…) Then figure out how to translate the documentation examples to the reporting library / task runner you chose. All of this is too much cognitive load. Vs: Choose Tape. Done.</p>
</li>
<li><p>**Globals: **Mocha, Jasmine, and several other alternatives pollute the global environment with functions like <code>describe</code>, <code>it</code>, etc… Some assertion libraries extend built-in prototypes. Aside from removing the self-documenting nature of simple module exports, those decisions could potentially conflict with the code you’re trying to test. Vs: Tape’s simple module export.</p>
</li>
<li><p><strong>Shared State:</strong> Functions like <em><code>beforeEach</code></em> and <em><code>afterEach</code></em> actively encourage you to do something you <strong>definitely should not do</strong>: Share state between tests. <em>Vs. Tape: No such functions for global state sharing. Instead, call setup and teardown routines from individual tests, and</em> <strong>*contain all state to local test variables.*</strong></p>
</li>
<li><p><strong>过多的配置项：</strong>选择一个断言库，选择一个报告库，选择一个任务组织器 (Grunt, Gulp, etc…)，然后还得学习你所选择的报告库和任务组织器的文档示例，学习成本过高。相比之下：选择使用 Tape，完事～</p>
</li>
<li><p><strong>全局变量：</strong>Mocha，Jasmine 等等通过<code>describe</code>，<code>it</code>等全局函数污染全局环境。某些断言库扩展了内置原型。除了破坏了模块的纯净性以外，这些操作还可能与您要测试的代码冲突。相比下：Tape 的纯净模块导出。</p>
</li>
<li><p><strong>共享状态：</strong>诸如*<code>beforeEach</code><em>和</em><code>afterEach</code>之类的功能*积极地鼓励您做一些您<strong>绝对不应该做的事情</strong>：在测试之间共享状态。相比下： Tape 没有用于全局状态共享的此类功能。取而代之的是，从制定的测试用例中调用挂载和卸载，并将所有状态包含在本地测试变量中。</p>
</li>
</ol>
<h2 id="Why-Tape"><a href="#Why-Tape" class="headerlink" title="Why Tape?"></a>Why Tape?</h2><h2 id="为什么选择-Tape？"><a href="#为什么选择-Tape？" class="headerlink" title="为什么选择 Tape？"></a>为什么选择 Tape？</h2><p>Mocha does way too much and gives developers way too many assertion choices, and that leads to <a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Analysis_paralysis">analysis paralysis</a> and lost productivity. Every time I have seen Mocha used on a project, I’ve seen developers dump way too much time in the testing framework and testing environment.</p>
<p>Mocha 给了开发者太多的断言库选择，这导致<a target="_blank" rel="noopener" href="http://en.wikipedia.org/wiki/Analysis_paralysis">分析瘫痪</a>和降低了生产效率。每当 Mocha 在项目中使用时，我都看到开发人员搭建在测试框架和测试环境过程中浪费了太多时间。</p>
<p>While I’m ranting I would be remiss if I didn’t mention that if you spend a lot of time on mocks and stubs, that’s a strong code-smell. You can probably dramatically simplify both your tests and your application by breaking your app into more modular chunks.</p>
<p>我很想告诉你，如果您在 mocks 和 stubs 上花费大量时间，那说明你跑偏了，这是一种很糟糕的事情。因为往往将应用程序划分为更多的模块，您就能过极大地简化测试和应用程序。</p>
<h2 id="Mocking-is-a-code-smell"><a href="#Mocking-is-a-code-smell" class="headerlink" title="Mocking is a code smell."></a>Mocking is a code smell.</h2><h2 id="过重的-Mock-是一中糟糕的编码习惯"><a href="#过重的-Mock-是一中糟糕的编码习惯" class="headerlink" title="过重的 Mock 是一中糟糕的编码习惯"></a>过重的 Mock 是一中糟糕的编码习惯</h2><p>A few simple mocks here and there are OK. Some of your app will inevitably involve side-effects (reading from or writing to the network or filesystem, for instance). When you do have a genuine need for mocks, keep them simple. Little more than basic stubs are ideal. But on many projects, I’ve seen a lot of over-complicated mocks that never needed to exist in the first place. Why maintain more code than you need to?<br>The more you break your problems down into simple, pure functions, the easier it will be to test your code without mocks.<br>一些简单的 Mocking 可以接受。部分情况下，您的某些应用程序不可避免地会被带入副作用（例如，从网络或文件系统读取或写入网络或文件系统）。当您确实需要 Mock 时，请尽量使其简单。采用更多基础 stubs 是不错的主意。但是在许多项目中，我看到了很多过于复杂的 Mock，这些 Mock 从一开始就不需要存在。为什么要维护比您所需更多的代码？<br>将问题分解成简单的<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Pure_function">纯</a> <a target="_blank" rel="noopener" href="https://medium.com/javascript-scene/the-two-pillars-of-javascript-pt-2-functional-programming-a63aa53a41a4">函数</a>的次数越多，_无需 Mock 就可以测试代码_。</p>
<h2 id="Testing-is-not-what-you-should-spend-most-of-your-time-doing"><a href="#Testing-is-not-what-you-should-spend-most-of-your-time-doing" class="headerlink" title="Testing is not what you should spend most of your time doing."></a>Testing is not what you should spend most of your time doing.</h2><h2 id="你不应该投入大量时间去编写测试用例"><a href="#你不应该投入大量时间去编写测试用例" class="headerlink" title="你不应该投入大量时间去编写测试用例"></a>你不应该投入大量时间去编写测试用例</h2><p>You should spend most of your time thinking about how to create the best, most flexible, most performant solutions given the afforded time constraints. Time is value in the software development world, and you shouldn’t waste one minute of it.</p>
<p>在有限时间的开发周期内下，您应将大部分时间都花在如何创建更好，更灵活，更高性能的解决方案上。在软件开发世界中，时间很重要，您不应该浪费时间。</p>
<p>If you get your kicks burning money, use Mocha, Jasmine, Jest, etc… But if you value your time, keep reading.</p>
<p>如果并无所谓，可以使用 Mocha，Jasmine，Jest 等。但是，如果您珍惜你的时间，请继续阅读。</p>
<p>With many BDD assertion libraries, there are getters with side effects. At one company I worked for (not naming names), that buried a bug in one of our tests, and we spent far too long debugging the test case rather than developing actual application code.</p>
<p>在许多 BDD 断言库中，他们都有些带有副作用的 getters。在我工作的一家公司（没有命名），这在我们的一个测试中掩埋了一个错误，并且我们花了太多的时间调试测试用例，而不是开发实际的应用程序代码。</p>
<h2 id="Test-assertions-should-be-dead-simple-amp-completely-free-of-magic"><a href="#Test-assertions-should-be-dead-simple-amp-completely-free-of-magic" class="headerlink" title="Test assertions should be dead simple,&amp; completely free of magic."></a>Test assertions should be dead simple,&amp; <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Magic_(programming)">completely free of magic</a>.</h2><h2 id="测试断言应该尽可能的简单，并且完全没有黑魔法（不带入除应有实现的实现）"><a href="#测试断言应该尽可能的简单，并且完全没有黑魔法（不带入除应有实现的实现）" class="headerlink" title="测试断言应该尽可能的简单，并且完全没有黑魔法（不带入除应有实现的实现）"></a>测试断言应该尽可能的简单，并且完全没有黑魔法（不带入除应有实现的实现）</h2><p><em><code>equal</code></em>, <em><code>deepEqual</code></em>, <em><code>pass</code></em> &amp; <em><code>fail</code></em> are my primary go-to assertions. If <em><code>equal</code></em> and <em><code>deepEqual</code></em> were the only assertions available anywhere, the testing world would probably be better off for it.</p>
<p>Why? <em><code>equal</code></em> &amp; <em><code>deepEqual</code></em> provide quality information about expectations, and they lead to very concise test cases that are <strong>easy to read &amp; maintain.</strong></p>
<p>When you write a bug report, you should always <em>provide a description,</em> explain <em>what you expected to see</em>, and explain <em>what you actually saw</em>.</p>
<p>Test cases should be written in much the same way:</p>
<ol>
<li>Describe the feature that you’re testing in plain English.</li>
<li>Provide the expected outcome of the test. This part is why many unit tests are called <em>expectations.</em></li>
<li>Compare that to the <em>actual value.</em></li>
</ol>
<p>When a unit tests fails, <em>the error message is your bug report.</em></p>
<p><em><code>equal</code></em>, <em><code>deepEqual</code></em>, <em><code>pass</code></em> &amp; <em><code>fail</code></em> 是我常用的断言。如果*<code>equal</code>* and <em><code>deepEqual</code></em> 是唯一可用的断言，那么测试可读性会变得更好。</p>
<p>为什么？_<code>equal</code>_ &amp; <em><code>deepEqual</code></em> 提供有关期望的质量信息，它们测试用例使非常简洁，<strong>易于阅读和维护。</strong></p>
<p>编写错误报告时，应始终<em>提供说明，</em>解释<em>您期望看到的内容</em>，并解释<em>您实际看到的内容</em>。</p>
<p>测试用例的编写方式一般参见如下：</p>
<ol>
<li>用简单的英语描述您要测试的功能。</li>
<li>提供测试的预期结果。这就是为什么许多单元测试称为<em>期望的原因。</em></li>
<li>将其与<em>实际值</em>进行比较<em>。</em></li>
</ol>
<p>当单元测试失败时，<em>错误消息就是您的错误报告。</em></p>
<h2 id="Your-test-descriptions-should-be-clear-enough-to-use-as-documentation"><a href="#Your-test-descriptions-should-be-clear-enough-to-use-as-documentation" class="headerlink" title="Your test descriptions should be clear enough to use as documentation."></a>Your test descriptions should be clear enough to use as documentation.</h2><h2 id="您的测试描述应足够清晰，以至可以当作文档阅读。"><a href="#您的测试描述应足够清晰，以至可以当作文档阅读。" class="headerlink" title="您的测试描述应足够清晰，以至可以当作文档阅读。"></a>您的测试描述应足够清晰，以至可以当作文档阅读。</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> test <span class="keyword">from</span> <span class="string">&#x27;tape&#x27;</span></span><br><span class="line"></span><br><span class="line">test(<span class="string">&#x27;A passing test&#x27;</span>, <span class="function">(<span class="params">assert</span>) =&gt;</span> &#123;</span><br><span class="line">    assert.pass(<span class="string">&#x27;This test will pass.&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    assert.end()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">test(<span class="string">&#x27;Assertions with tape.&#x27;</span>, <span class="function">(<span class="params">assert</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> expected = <span class="string">&#x27;something to test&#x27;</span></span><br><span class="line">    <span class="keyword">const</span> actual = <span class="string">&#x27;sonething to test&#x27;</span></span><br><span class="line"></span><br><span class="line">    assert.equal(</span><br><span class="line">        actual,</span><br><span class="line">        expected,</span><br><span class="line">        <span class="string">&#x27;Given two mismatched values, .equal() should produce a nice bug report&#x27;</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    assert.end()</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>If you write tests this way, your test error messages should be clear enough to use as bug reports:</p>
<p>如果你这么写测试用例，则你的测试错误信息将会足够清楚，甚至用来当作 bug 报告来看。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">TAP version 13</span><br><span class="line"><span class="meta">#</span><span class="bash"> A passing <span class="built_in">test</span></span></span><br><span class="line">ok 1 This test will pass.</span><br><span class="line"><span class="meta">#</span><span class="bash"> Assertions with tape.</span></span><br><span class="line">not ok 2 Given two mismatched values, .equal() should produce a nice bug report</span><br><span class="line">  ---</span><br><span class="line">    operator: equal</span><br><span class="line">    expected: &#x27;something to test&#x27;</span><br><span class="line">    actual:   &#x27;sonething to test&#x27;</span><br><span class="line">  ...1..2</span><br><span class="line"><span class="meta">#</span><span class="bash"> tests 2</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> pass 1</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> fail 1</span></span><br></pre></td></tr></table></figure>

<h2 id="Your-automated-test-error-messages-are-your-bug-reports"><a href="#Your-automated-test-error-messages-are-your-bug-reports" class="headerlink" title="Your automated test error messages are your bug reports."></a>Your automated test error messages are your bug reports.</h2><h2 id="您的自动测试错误消息就是您的错误报告。"><a href="#您的自动测试错误消息就是您的错误报告。" class="headerlink" title="您的自动测试错误消息就是您的错误报告。"></a>您的自动测试错误消息就是您的错误报告。</h2><p>Simple tests assertions provide:</p>
<ul>
<li>  Better readability.</li>
<li>  Less code.</li>
<li>  Less maintenance.</li>
</ul>
<p>These features trump all the bells and whistles in the world.</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">liuarui</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="https://liuarui.github.io/2021/02/01/单元测试/Why I use Tape Instead of Mocha &amp; So Should You/">https://liuarui.github.io/2021/02/01/单元测试/Why I use Tape Instead of Mocha &amp; So Should You/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E5%8D%95%E5%85%83%E6%B5%8B%E8%AF%95/">单元测试</a><a class="post-meta__tags" href="/tags/%E7%BF%BB%E8%AF%91/">翻译</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2021/04/21/HTML/%E6%A0%87%E7%AD%BE/"><i class="fa fa-chevron-left">  </i><span>HTML标签相关</span></a></div><div class="next-post pull-right"><a href="/2021/02/01/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%A6%82%E8%AE%BA/"><span>操作系统概念</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2019 - 2021 By liuarui</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script id="ribbon" src="/js/third-party/canvas-ribbon.js" size="150" alpha="0.6" zIndex="-1" data-click="false"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script></body></html>